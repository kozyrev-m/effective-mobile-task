# effective-mobile-task
- [Условие задачи](#task)
- [Конфигурация приложения](#config)
- [Управление приложением](#management)
  - [Makefile](#management-makefile)
  - [Запуск приложения](#management-containers)
# Условие задачи <a name="task"/>
Реализовать сервис, который будет получать ФИО по API, затем будет обогащать ответ из открытых API наиболее вероятными возрастом, полом и национальностью и сохранять данные в
БД. По запросу выдавать информацию о найденных людях.  
  
Необходимо реализовать следующее:
1. Выставить rest методы:
    - Для получения данных с различными фильтрами и пагинацией
    - Для удаления по идентификатору
    - Для изменения сущности
    - Для добавления новых людей в формате:
      ```
      {
        "name": "Dmitriy",
        "surname": "Ushakov",
        "patronymic": "Vasilevich" // необязательно
      }
      ```
2. Корректное сообщение обогатить
    - Возрастом - https://api.agify.io/?name=Dmitriy
    - Полом - https://api.genderize.io/?name=Dmitriy
    - Национальностью - https://api.nationalize.io/?name=Dmitriy
3. Обогащенное сообщение положить в БД postgres (структура БД должна быть создана
путем миграций)
4. Покрыть код debug- и info-логами
5. Вынести конфигурационные данные в .env

# Конфигурация приложения <a name="config"/>

Приложение конфигурируется с помощью переменных окружения и флагов командной строки.

| Переменная окружения           | Флаг командной строки | Описание                                      |
|--------------------------------|-----------------------|-----------------------------------------------|
| `RUN_ADDR`                     | `-a <host:port>`      | адрес и порт запуска сервера                  |
| `LOG_LEVEL`                    | `-l <level>`          | уровень логирования                           |
| `DATABASE_DSN`                 | `-d <dsn>`            | адрес подключения к базе данных               |

# Управление приложением <a name="management">
## Makefile <a name="management-makefile">
Подготовка приложения, тестирование, и запуск выполняется с помощью команды make (из корня репозитория).  
В Makefile определены основные команды для управления приложением. 
  
Подробнее [Makefile](Makefile)  
  
## Запуск приложения <a name="management-containers">    
Команда для создания и запуска контейнеров с приложением и базой данных:  
```
make docker-dev-up
```      
После успешного завершения команды можно взаимодействовать с API приложения.  
  
Конфигурация запущенных контейнеров см: [docker-compose/dev/docker-compose.yml](docker-compose/dev/docker-compose.yml)
   
